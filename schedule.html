<!DOCTYPE html>
<head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link type="text/css" rel="stylesheet" href="schedule.css"/>
</head>
<body>
        <table>
                <thead>
                        <tr>
                                <th></th>
                                <th>
                                        <span class="day">1</span>
                                        <span class="long">Monday</span>
                                        <span class="short">Mon</span>
                                </th>
                                <th>
                                        <span class="day">2</span>
                                        <span class="long">Tuesday</span>
                                        <span class="short">Tue</span>
                                </th>
                                <th>
                                        <span class="day">3</span>
                                        <span class="long">Wednesday</span>
                                        <span class="short">We</span>
                                </th>
                                <th>
                                        <span class="day">4</span>
                                        <span class="long">Thursday</span>
                                        <span class="short">Thur</span>
                                </th>
                                <th>
                                        <span class="day">5</span>
                                        <span class="long">Friday</span>
                                        <span class="short">Fri</span>
                                </th>
                        </tr>
                </thead>
                <tbody>
                        <tr>
                                <td class="hour" rowspan="4"><span>8:00</span></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td class="hour" rowspan="4"><span>9:00</span></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td class="hour" rowspan="4"><span>10:00</span></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td class="hour" rowspan="4"><span>11:00</span></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td class="hour" rowspan="4"><span>12:00</span></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td class="hour" rowspan="4"><span>1:00</span></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td class="hour" rowspan="4"><span>2:00</span></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        
                        <tr>
                                <td class="hour" rowspan="4"><span>3:00</span></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td class="hour" rowspan="4"><span>4:00</span></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td class="hour" rowspan="4"><span>5:00</span></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td class="hour" rowspan="4"><span>6:00</span></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td class="hour" rowspan="4"><span>7:00</span></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td class="hour" rowspan="4"><span>8:00</span></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                        <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                        </tr>
                </tbody>
        </table>
        <script src="jquery-3.1.0.min.js"></script>
        <script type="text/javascript">
                var init = function() {
                        var urlParams = new URLSearchParams(window.location.search);
                        var s = urlParams.get("s");
                        if (s == null) return;
                        var schedule = JSON.parse(s);
                        console.log("schedule", schedule);
                        
                        var color = 0;
                        for (var section of schedule) {
                                for (var day in section.schedules) {
                                        var dayIdx = 0;
                                        switch (day) {
                                                case "Mo":
                                                        dayIdx = 0;
                                                        break;
                                                case "Tu":
                                                        dayIdx = 1;
                                                        break;
                                                case "We":
                                                        dayIdx = 2;
                                                        break;
                                                case "Th":
                                                        dayIdx = 3;
                                                        break;
                                                case "Fr":
                                                        dayIdx = 4;
                                                        break;
                                        }
                                        var time = section.schedules[day];
                                        var startRow = Math.floor((time.start - 480) / 15);
                                        var endRow = Math.ceil((time.end - 480) / 15);
                                        for (var row = startRow; row < endRow; row++) {
                                                var col = ((row % 4) == 0) ? dayIdx + 2 : dayIdx + 1;
                                                var $cell = $("tbody tr:eq(" + row + ") :nth-child(" + col + ")");
                                                $cell.addClass("taken" + (color + 1))
                                                if (row == Math.floor((endRow + startRow) / 2)) {
                                                        $cell.html(section.course.courseTitle);
                                                }
                                                if (row == startRow) {
                                                        $cell.addClass("taken-top");
                                                } else if (row == endRow - 1) {
                                                        $cell.addClass("taken-bottom");
                                                } else {
                                                        $cell.addClass("taken-middle");
                                                }
                                        }
                                }
                                color = (color + 1) % 4;
                        }
                };
        
                $(document).ready(init);
        </script>
</body>
